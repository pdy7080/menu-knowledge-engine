# 08. Wireframe v0.1 — MVP 화면 설계

> **"예쁜 UI"가 아니라, 설계한 엔진이 화면에서 어떻게 작동하는지를 고정한다.**  
> 이 문서를 개발자에게 주면 "이 화면들을 만들면 된다"가 명확해야 한다.

---

## 0. 플랫폼 전제

| 항목 | 결정 | 근거 |
|---|---|---|
| B2C | **모바일웹** (일반 웹서비스) | 외국인이 앱 설치 안 함. QR 스캔 → 바로 웹. |
| B2B | **웹 대시보드** (성수야 내부) | 사장님 PC/폰에서 접근 |
| 카메라 | **파일 업로드 기반** (`<input type="file" accept="image/*" capture="environment">`) | iOS Safari/Chrome 호환성 최고, getUserMedia 대비 개발 난이도↓ |
| PWA | **v0.1 미적용** | 반복 사용 데이터 확인 후 v0.2에서 검토 |

### 카메라 UX 결정 근거

```
❌ getUserMedia (카메라 라이브뷰)
   - iOS Safari에서 제약/버그 빈번
   - 기기별 해상도/권한 튜닝 필요
   - 개발 시간 2~3배 증가

✅ 파일 업로드 (input file + capture)
   - 폰 기본 카메라 앱이 열림 → 촬영 → 자동 업로드
   - iOS/Android 모든 브라우저 호환
   - 사용자에게 이미 익숙한 패턴
   - 갤러리 선택도 동시 지원
```

---

## 1. 화면 목록 — MVP 총 6화면

| # | 화면 | 사용자 | 진입 경로 |
|---|---|---|---|
| **B2C-1** | Landing + 사진 업로드 | 외국인 | QR스캔 / 직접 URL |
| **B2C-2** | 결과 리스트 | 외국인 | 사진 업로드 후 |
| **B2B-1** | 메뉴 업로드 | 사장님 | 성수야 가게관리 |
| **B2B-2** | 매칭 결과 검토/승인 | 사장님 | 업로드 후 |
| **B2B-3** | QR 메뉴 페이지 프리뷰 | 사장님/외국인 | 승인 후/QR 스캔 |
| **Admin-1** | 신규 메뉴 큐 | 운영자 | 내부 접근 |

---

## 2. B2C 화면 — 외국인이 메뉴판을 찍는다

### B2C-1. Landing + 사진 업로드

```
┌─────────────────────────────────────┐
│                                     │
│     🍲 Menu Lens Korea              │
│     "Scan any Korean menu"          │
│                                     │
│  Select language:  [EN ▾]           │
│                                     │
│  ┌─────────────────────────────┐    │
│  │                             │    │
│  │    📷                       │    │
│  │                             │    │
│  │  [Take a photo of menu]     │    │  ← input file + capture
│  │                             │    │
│  │  or [Choose from gallery]   │    │  ← input file (no capture)
│  │                             │    │
│  └─────────────────────────────┘    │
│                                     │
│  ─── or enter a menu name ───       │
│  [________________] [Search]        │  ← 텍스트 직접 검색 (보조)
│                                     │
│  💡 We explain, not just translate. │
│                                     │
│  Powered by Menu Knowledge Engine   │
└─────────────────────────────────────┘
```

**핵심 UX 결정:**

| 요소 | 결정 | 근거 |
|---|---|---|
| 언어 선택 | 상단 고정 | 첫 화면에서 반드시 설정 |
| 사진 버튼 | CTA 최우선 | "찍기"가 핵심 액션 |
| 갤러리 선택 | 보조 옵션 | 이미 찍은 사진도 가능 |
| 텍스트 검색 | 하단 보조 | 메뉴명을 직접 아는 경우 |
| "explain, not translate" | 태그라인 | 파파고와의 차별점 즉시 전달 |

**`<input>` 구현:**
```html
<!-- 카메라 우선 -->
<input type="file" accept="image/*" capture="environment" id="camera-input">

<!-- 갤러리 선택 -->
<input type="file" accept="image/*" id="gallery-input">
```

---

### B2C-2. 결과 리스트 (3초 이내 표시)

```
┌─────────────────────────────────────┐
│ [← Back]  Results (8 items)  [EN ▾] │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 🍲 Sagol Gomtang       ₩9,000  │ │
│ │ 사골곰탕 (Sa-gol Gom-tang)      │ │
│ │                                 │ │
│ │ Rich ox bone broth simmered     │ │
│ │ for hours. Mild, savory flavor. │ │
│ │                                 │ │
│ │ 🟢 Mild  🐄 Beef  ⭐⭐ Easy    │ │
│ │                                 │ │
│ │ [📸 Photo] [ℹ️ More] [⚠️ Allergy]│ │
│ └─────────────────────────────────┘ │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 🍲 Yukgaejang          ₩10,000 │ │
│ │ 육개장 (Yuk-gae-jang)           │ │
│ │                                 │ │
│ │ Spicy shredded beef soup with   │ │
│ │ vegetables and glass noodles.   │ │
│ │                                 │ │
│ │ 🔴🔴 Spicy  🐄 Beef  ⭐⭐⭐     │ │
│ │                                 │ │
│ │ [📸 Photo] [ℹ️ More] [⚠️ Allergy]│ │
│ └─────────────────────────────────┘ │
│                                     │
│ ┌─── Analyzing... ────────────────┐ │
│ │ 🍲 "할머니뼈해장국"     ₩11,000 │ │
│ │                                 │ │
│ │ ⏳ Identifying this dish...     │ │
│ │ ████████░░░░░░░░  (3~5s)       │ │
│ │                                 │ │
│ │ → 완료 후 카드가 채워짐          │ │
│ └─────────────────────────────────┘ │
│                                     │
│ ─────────────────────────────────── │
│ Was this helpful?  [👍] [👎]       │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 📢 This restaurant isn't fully  │ │
│ │ listed yet. Share this link     │ │
│ │ with the owner!                 │ │
│ │                                 │ │
│ │ [Copy Link] [KakaoTalk]         │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

**카드 1장의 정보 구조 (= API identify 응답 매핑):**

```
[카드]
├── composed_name_en          ← 수식어 조합 영문명
├── price                     ← 가격
├── name_ko + romanization    ← 한국어명 + 로마자
├── explanation_short         ← 1문장 설명
├── spice_level 아이콘        ← 🟢🟡🔴
├── allergen 요약 아이콘       ← 🐄🐷🦐🥜
├── difficulty_score 별       ← ⭐~⭐⭐⭐⭐⭐
└── 확장 버튼
    ├── Photo (이미지)
    ├── More (explanation_long + cultural_context)
    └── Allergy (allergens 상세 + dietary_tags)
```

**미매칭 항목 UX — "실패"가 아니라 "분석 중":**
- 진행 바가 채워지면서 "Identifying this dish..." 표시
- AI Discovery 완료 후 카드가 자연스럽게 채워짐
- 사용자에게는 "똑똑한 시스템"으로 인식
- 내부적으로는 신규 canonical 등록 + evidence 기록

**바이럴 트리거 — 미등록 식당 공유:**
- 결과 하단에 "이 식당을 알려주세요" CTA
- 사장님에게 보낼 링크 자동 생성
- B2C → B2B 전환 퍼널

---

## 3. B2B 화면 — 사장님이 메뉴를 등록한다

### B2B-1. 메뉴 업로드 (성수야 가게관리 내)

```
┌─────────────────────────────────────┐
│ 성수야 가게 관리                     │
│ [가게정보] [사진] [✅메뉴] [리뷰]    │
│                                     │
│ ═══ 다국어 메뉴 관리 ═══            │
│                                     │
│ 📋 현재 등록된 메뉴: 0개            │
│                                     │
│ ┌─────────────────────────────┐     │
│ │                             │     │
│ │  📷 메뉴판 사진 업로드       │     │
│ │                             │     │
│ │  사진만 올리면               │     │
│ │  2분 내 다국어 메뉴 완성!    │     │
│ │                             │     │
│ │  [사진 업로드]               │     │
│ │                             │     │
│ └─────────────────────────────┘     │
│                                     │
│ ─── 또는 ───                        │
│ [+ 메뉴 직접 추가]                   │
│                                     │
│ 💡 자동으로 영어·일본어·중국어 메뉴가 │
│    만들어집니다. QR코드도 함께!      │
└─────────────────────────────────────┘
```

**성수야 통합 방식:**
- 성수야 기존 가게관리 UI 내 [메뉴] 탭에 위치
- 별도 앱/사이트가 아니라 성수야 웹의 한 기능
- API 호출: `POST /api/v1/shop/{shop_id}/menu/upload`

---

### B2B-2. 매칭 결과 검토/승인 (핵심 화면)

```
┌──────────────────────────────────────────┐
│ 메뉴 인식 결과                            │
│ 인식된 메뉴: 18개                         │
│ ✅ 높은 확신: 15  ⚠️ 확인 필요: 2  ❓ 낮음: 1 │
│                                          │
│ ┌──────────────────────────────────────┐ │
│ │ ✅ 할머니뼈해장국           ₩11,000  │ │
│ │                                      │ │
│ │ 매칭: 뼈해장국 (Pork Bone Soup)      │ │
│ │ 수식어: 할머니 → "Homestyle"         │ │
│ │                                      │ │
│ │ 번역 결과:                           │ │
│ │ EN: Homestyle Pork Bone Hangover Soup│ │
│ │ JA: おばあちゃんの豚骨スープ          │ │
│ │ ZH: 奶奶骨头解酒汤                   │ │
│ │                                      │ │
│ │ 난이도: ⭐⭐⭐⭐⭐ (외국인 어려움)     │ │
│ │ 알레르기: 돼지고기                    │ │
│ │                                      │ │
│ │ [✏️ 수정] [📸 사진 변경] [✅ 승인]   │ │
│ └──────────────────────────────────────┘ │
│                                          │
│ ┌──────────────────────────────────────┐ │
│ │ ⚠️ 엄마손제육덮밥           ₩9,000   │ │
│ │                                      │ │
│ │ 매칭: 제육덮밥 (확신도 0.75)         │ │
│ │ 수식어: 엄마손 → "Mother's Touch"    │ │
│ │ ⚠️ "엄마손"이 상호명인지 수식어인지   │ │
│ │    확인해주세요                       │ │
│ │                                      │ │
│ │ [상호명이에요] [수식어 맞아요] [수정] │ │
│ └──────────────────────────────────────┘ │
│                                          │
│ ──────────────────────────────────────── │
│                                          │
│ [전체 승인] [QR 메뉴 페이지 생성 →]      │
└──────────────────────────────────────────┘
```

**화면 → DB 매핑:**

| 화면 요소 | DB 출처 |
|---|---|
| "할머니뼈해장국" | menu_variants.display_name_ko |
| "뼈해장국" | canonical_menus.name_ko |
| "Homestyle" | modifiers.translation_en (할머니) |
| "Homestyle Pork Bone..." | API의 composed_name_en |
| 난이도 ⭐⭐⭐⭐⭐ | canonical_menus.difficulty_score |
| 알레르기 | canonical_menus.allergens |
| 확신도 0.75 | menu_variants.ai_match_confidence |

**사장님 수정이 발생하면:**
- menu_variants.human_verified = true
- 수정 내용이 evidences에 기록 (source_type: 'manual_verification')
- 같은 패턴이 반복되면 모델/사전 개선에 반영

---

### B2B-3. QR 메뉴 페이지 프리뷰 (= 외국인이 보는 페이지)

```
┌─────────────────────────────────────┐
│ 🍲 할머니뼈해장국집                  │
│    Grandma's Bone Soup House        │
│                                     │
│ [EN] [JA] [ZH]  ← 언어 전환        │
│                                     │
│ ── SOUPS ──                         │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ [사진]  Homestyle Pork Bone     │ │
│ │         Hangover Soup           │ │
│ │         할머니뼈해장국 ₩11,000   │ │
│ │                                 │ │
│ │ Slow-simmered pork spine soup,  │ │
│ │ a beloved Korean hangover cure. │ │
│ │ Rich, hearty, and comforting.   │ │
│ │                                 │ │
│ │ 🔴 Mild Spicy  🐷 Pork         │ │
│ │ ⭐⭐⭐⭐⭐ Adventure Level       │ │
│ └─────────────────────────────────┘ │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ [사진]  Soft Tofu Stew          │ │
│ │         순두부찌개 ₩9,000        │ │
│ │ ...                             │ │
│ └─────────────────────────────────┘ │
│                                     │
│ ── TIPS FOR THIS RESTAURANT ──      │
│ 💡 Side dishes (반찬) are free      │
│    and refillable!                  │
│ 💡 Press the bell (호출벨) on your  │
│    table to call the server.        │
│                                     │
│ Powered by Menu Lens Korea          │
└─────────────────────────────────────┘
```

**이 페이지의 두 가지 진입:**
1. **사장님 프리뷰**: 승인 후 결과 확인
2. **외국인 QR 스캔**: `https://menu.example.com/s/{shop_code}?lang=en`

**"difficulty_score"를 외국인에게는 "Adventure Level"로 표현:**
- ⭐ "You already know this!" (비빔밥)
- ⭐⭐⭐ "Worth trying!" (순두부찌개)
- ⭐⭐⭐⭐⭐ "True Korean Adventure!" (할머니뼈해장국)

**하단 TIPS = cultural_concepts 테이블 데이터:**
- 해당 식당 유형에 맞는 문화 팁 자동 선택
- 반찬, 호출벨, 셀프코너, 선불/후불 등

---

## 4. Admin 화면 — 엔진 운영자

### Admin-1. 신규 메뉴 큐

```
┌──────────────────────────────────────────────┐
│ 🔧 Menu Knowledge Engine Admin               │
│                                              │
│ 신규 메뉴 큐: 34건                            │
│ B2C 카메라: 22건  |  B2B 업로드: 12건          │
│                                              │
│ 필터: [전체] [확인필요] [자동등록] [보류]       │
│                                              │
│ ┌──────────────────────────────────────────┐ │
│ │ #1  "왕얼큰순두부뼈해장국"                 │ │
│ │ 소스: B2C 스캔 (명동)  2025-02-11 14:32  │ │
│ │                                          │ │
│ │ 자동 분해:                                │ │
│ │   왕(size) + 얼큰(taste) + 순두부(ingr)  │ │
│ │   + 뼈해장국(canonical)                   │ │
│ │                                          │ │
│ │ 매칭: canon_042 (뼈해장국)                │ │
│ │ 확신도: 0.71                              │ │
│ │                                          │ │
│ │ [✅ 승인] [✏️ 수정 후 승인] [🆕 신규 생성] │ │
│ └──────────────────────────────────────────┘ │
│                                              │
│ ┌──────────────────────────────────────────┐ │
│ │ #2  "도가니탕"                             │ │
│ │ 소스: B2C 스캔 × 8회 (명동 4, 종로 4)     │ │
│ │                                          │ │
│ │ DB에 없음. AI Discovery 결과:             │ │
│ │   Ox Knee Soup, confidence: 0.92         │ │
│ │                                          │ │
│ │ [✅ 승인 (canonical 신규)] [수정]          │ │
│ └──────────────────────────────────────────┘ │
│                                              │
│ ── 엔진 상태 ──                               │
│ Canonical: 523  |  Modifier: 87              │
│ DB 히트율 (7일): 73%  |  AI 비용 (7일): ₩12,400│
│ 미검토 큐: 14건                               │
└──────────────────────────────────────────────┘
```

**Admin 화면의 진짜 목적:**
- 수동 검수가 DB 품질을 높이는 루프
- 반복 출현하는 미매칭 메뉴 = 우선 등록 후보
- 엔진 상태 모니터링 (DB 히트율, AI 비용)

---

## 5. 화면 간 연결 — 데이터 흐름

```
[B2C-1] 사진 업로드
    │
    │ POST /api/v1/menu/recognize
    │ POST /api/v1/menu/identify
    ▼
[B2C-2] 결과 리스트
    │
    ├── DB 매칭 성공 → 즉시 카드 표시
    ├── 미매칭 → "Analyzing..." → AI Discovery → 카드 표시
    │                                    │
    │                              [Admin-1] 신규 큐에 추가
    │
    └── "식당에 알려주기" 공유
              │
              ▼
[B2B-1] 사장님이 링크 받고 메뉴 업로드
    │
    │ POST /api/v1/shop/{id}/menu/upload
    ▼
[B2B-2] 매칭 결과 검토/승인
    │
    │ POST /api/v1/shop/{id}/menu/confirm
    ▼
[B2B-3] QR 메뉴 페이지 생성
    │
    │ QR 코드 인쇄 → 식당에 부착
    ▼
[B2C] 다음 외국인이 QR 스캔 → B2B-3 직접 접근 (OCR 불필요)
```

**이 흐름의 핵심 루프:**
```
외국인이 찍음 → DB에 없음 → AI가 학습 → DB에 추가
→ 사장님에게 알림 → 사장님이 등록 → QR 생성
→ 다음 외국인은 QR로 바로 접근 (촬영 불필요)

시간이 지날수록:
- AI 호출 감소 (비용↓)
- DB 커버리지 증가 (품질↑)
- QR 등록 식당 증가 (접근성↑)
```

---

## 6. PWA 전환 기준 (v0.2 판단 조건)

MVP 운영 후 아래 중 2~3개 충족 시 PWA 전환 검토:

| 조건 | 측정 방법 | 기준 |
|---|---|---|
| 반복 사용 | 동일 세션 ID가 여행 중 3회+ 사용 | 사용자 30%+ |
| 오프라인 수요 | "로딩 실패" 로그 비율 | 5%+ |
| 홈화면 설치 의향 | 결과 페이지 "설치" 배너 클릭률 | 10%+ |
| 푸시 유효성 | 가설: "근처 맛집 추천" 알림 | PMF 확인 후 |

---

## 7. 성수야 통합 포인트 정리

```
[성수야 기존 시스템]
  │
  ├── 가게 관리 페이지
  │     └── [메뉴] 탭 ← 여기에 B2B-1, B2B-2 화면 삽입
  │
  ├── 가게 공개 프로필
  │     └── "다국어 메뉴 보기" 버튼 → B2B-3 페이지 링크
  │
  └── 외부 공개 URL (신규)
        └── sungsuya.kr/menu/scan → B2C-1 페이지
            (누구나 접근, 성수동 메뉴판 스캔)
```

**통합 원칙:**
- 성수야 내부에는 **iframe/웹뷰가 아니라 API 연동**
- Menu Knowledge Engine은 독립 서비스로 운영
- 성수야는 첫 번째 클라이언트일 뿐, 종속되지 않음
- shop_id로 연결, seongsuya_id 필드로 역참조
